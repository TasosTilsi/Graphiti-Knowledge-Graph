---
phase: 01-storage-foundation
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - pyproject.toml
  - src/__init__.py
  - src/models/__init__.py
  - src/models/context.py
  - src/config/__init__.py
  - src/config/paths.py
autonomous: true

must_haves:
  truths:
    - "Project dependencies install without errors"
    - "GraphScope enum defines GLOBAL and PROJECT values"
    - "Path constants resolve correctly on the system"
  artifacts:
    - path: "pyproject.toml"
      provides: "Project configuration with kuzu and graphiti-core dependencies"
      contains: "graphiti-core"
    - path: "src/models/context.py"
      provides: "GraphScope enum for routing decisions"
      contains: "class GraphScope"
    - path: "src/config/paths.py"
      provides: "Path constants for database locations"
      contains: "GLOBAL_DB_PATH"
  key_links:
    - from: "src/config/paths.py"
      to: "pathlib.Path"
      via: "Path.home() for cross-platform resolution"
      pattern: "Path\\.home\\(\\)"
---

<objective>
Set up project foundation with dependencies and core data models for dual-scope Kuzu storage.

Purpose: Establish the foundation that all storage layer code will build upon - dependencies, enums, and path constants.
Output: Working Python package with kuzu/graphiti-core installed, GraphScope enum, and path configuration.
</objective>

<execution_context>
@/home/tasostilsi/.claude/get-shit-done/workflows/execute-plan.md
@/home/tasostilsi/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/01-storage-foundation/01-RESEARCH.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create project structure with dependencies</name>
  <files>
    pyproject.toml
    src/__init__.py
    src/models/__init__.py
    src/config/__init__.py
  </files>
  <action>
Create pyproject.toml with:
- name: "graphiti-knowledge-graph"
- version: "0.1.0"
- python: ">=3.12"
- dependencies:
  - kuzu==0.11.3
  - graphiti-core[kuzu]==0.26.3

Create src/ directory structure with __init__.py files for:
- src/__init__.py (empty, makes src a package)
- src/models/__init__.py (empty for now)
- src/config/__init__.py (empty for now)

After creating pyproject.toml, run `pip install -e .` to install the package in editable mode. This ensures dependencies are available.
  </action>
  <verify>
Run: `python -c "import kuzu; print(kuzu.__version__)"` - should print "0.11.3"
Run: `python -c "from graphiti_core.driver.kuzu_driver import KuzuDriver; print('OK')"` - should print "OK"
  </verify>
  <done>
pyproject.toml exists with correct dependencies, pip install -e . succeeds, kuzu and graphiti-core are importable.
  </done>
</task>

<task type="auto">
  <name>Task 2: Create GraphScope enum and path configuration</name>
  <files>
    src/models/context.py
    src/config/paths.py
  </files>
  <action>
Create src/models/context.py with:
```python
from enum import Enum

class GraphScope(Enum):
    """Identifies which knowledge graph scope to use"""
    GLOBAL = "global"    # User preferences, stored in ~/.graphiti/global/
    PROJECT = "project"  # Project-specific knowledge, stored in .graphiti/
```

Create src/config/paths.py with:
```python
from pathlib import Path

# Global scope database path: ~/.graphiti/global/graphiti.kuzu
GLOBAL_DB_DIR = Path.home() / ".graphiti" / "global"
GLOBAL_DB_PATH = GLOBAL_DB_DIR / "graphiti.kuzu"

# Project scope database is relative to project root
PROJECT_DB_DIR_NAME = ".graphiti"
PROJECT_DB_NAME = "graphiti.kuzu"

def get_project_db_path(project_root: Path) -> Path:
    """Get the database path for a project scope"""
    return project_root / PROJECT_DB_DIR_NAME / PROJECT_DB_NAME
```

Update src/models/__init__.py to export GraphScope:
```python
from src.models.context import GraphScope

__all__ = ["GraphScope"]
```

Update src/config/__init__.py to export path constants:
```python
from src.config.paths import (
    GLOBAL_DB_DIR,
    GLOBAL_DB_PATH,
    PROJECT_DB_DIR_NAME,
    PROJECT_DB_NAME,
    get_project_db_path,
)

__all__ = [
    "GLOBAL_DB_DIR",
    "GLOBAL_DB_PATH",
    "PROJECT_DB_DIR_NAME",
    "PROJECT_DB_NAME",
    "get_project_db_path",
]
```
  </action>
  <verify>
Run: `python -c "from src.models import GraphScope; print(GraphScope.GLOBAL.value)"` - should print "global"
Run: `python -c "from src.config import GLOBAL_DB_PATH; print(GLOBAL_DB_PATH)"` - should print path containing ".graphiti/global/graphiti.kuzu"
Run: `python -c "from src.config import get_project_db_path; from pathlib import Path; print(get_project_db_path(Path('/tmp/myproject')))"` - should print "/tmp/myproject/.graphiti/graphiti.kuzu"
  </verify>
  <done>
GraphScope enum with GLOBAL and PROJECT values exists and is importable. Path constants resolve to correct locations using pathlib for cross-platform compatibility.
  </done>
</task>

</tasks>

<verification>
All verification commands from tasks pass:
1. kuzu version check returns 0.11.3
2. KuzuDriver is importable from graphiti_core
3. GraphScope enum works correctly
4. Path constants resolve to expected locations
</verification>

<success_criteria>
- pyproject.toml defines project with kuzu 0.11.3 and graphiti-core[kuzu] 0.26.3
- Dependencies install without errors via pip install -e .
- GraphScope enum has GLOBAL and PROJECT values
- GLOBAL_DB_PATH resolves to ~/.graphiti/global/graphiti.kuzu
- get_project_db_path() constructs correct project-relative paths
</success_criteria>

<output>
After completion, create `.planning/phases/01-storage-foundation/01-01-SUMMARY.md`
</output>

---
plan: 8.9-01
phase: 08.9-gap-closure-integration-wiring-fixes-inserted
status: complete
completed: "2026-03-01"
requirements-completed:
  - R6.1
key-files:
  created: []
  modified:
    - src/mcp_server/tools.py
    - src/mcp_server/server.py
---

# Summary: Plan 8.9-01 — Add graphiti_index MCP Tool

## What Was Built

Added the missing `graphiti_index` tool handler to `src/mcp_server/tools.py` and registered it in `src/mcp_server/server.py`. MCP users can now trigger git history indexing from Claude Code via the `graphiti_index` tool.

## Tasks Completed

1. **Add graphiti_index function to tools.py** — Added between `graphiti_compact` and `graphiti_capture`. Function accepts `full: bool = False` and `since: str = ""` parameters. Uses `_run_graphiti(["index", ...], timeout=300, cwd=_get_cwd())`. Added `"graphiti_index"` to `__all__`. No structlog or print() calls (MCP stdio integrity preserved).

2. **Register graphiti_index in server.py** — Added `graphiti_index` to the import block from `src.mcp_server.tools`. Added `mcp.tool()(graphiti_index)` after `mcp.tool()(graphiti_compact)`. Updated tool count comment from "10" to "11".

## Self-Check: PASSED

- `graphiti_index` function exists in `src/mcp_server/tools.py` with correct parameters
- `"graphiti_index"` is in `__all__`
- Function uses correct `_run_graphiti` pattern with 300s timeout
- `graphiti_index` imported and registered in `server.py`
- Comment updated from 10 to 11 tools
- No structlog or print() statements in the new function

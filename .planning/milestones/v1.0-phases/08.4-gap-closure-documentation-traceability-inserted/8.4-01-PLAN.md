---
phase: 8.4-gap-closure-documentation-traceability-inserted
plan: "01"
type: execute
wave: 1
depends_on:
  - "8.1 (VERIFICATION.md files must exist — Phase 03 and 08 now formally verified)"
  - "8.2 (R6.2, R6.3 bugs fixed — status can be marked Complete)"
  - "8.3 (R4.2, R4.3 queue dispatch fixed — status can be marked Complete)"
files_modified:
  - .planning/REQUIREMENTS.md
  - .planning/phases/01-storage-foundation/01-01-SUMMARY.md
  - .planning/phases/01-storage-foundation/01-02-SUMMARY.md
  - .planning/phases/01-storage-foundation/01-03-SUMMARY.md
  - .planning/phases/02-security-filtering/02-01-SUMMARY.md
  - .planning/phases/02-security-filtering/02-02-SUMMARY.md
  - .planning/phases/02-security-filtering/02-03-SUMMARY.md
  - .planning/phases/02-security-filtering/02-04-SUMMARY.md
  - .planning/phases/02-security-filtering/02-05-SUMMARY.md
  - .planning/phases/03-llm-integration/03-01-SUMMARY.md
  - .planning/phases/03-llm-integration/03-02-SUMMARY.md
  - .planning/phases/03-llm-integration/03-03-SUMMARY.md
  - .planning/phases/03-llm-integration/03-04-SUMMARY.md
  - .planning/phases/03-llm-integration/03-05-SUMMARY.md
  - .planning/phases/04-cli-interface/04-01-SUMMARY.md
  - .planning/phases/05-background-queue/05-01-SUMMARY.md
  - .planning/phases/05-background-queue/05-02-SUMMARY.md
  - .planning/phases/05-background-queue/05-03-SUMMARY.md
  - .planning/phases/06-automatic-capture/06-01-SUMMARY.md
  - .planning/phases/06-automatic-capture/06-02-SUMMARY.md
  - .planning/phases/06-automatic-capture/06-03-SUMMARY.md
  - .planning/phases/06-automatic-capture/06-04-SUMMARY.md
autonomous: true
requirements:
  - R1.1
  - R1.2
  - R2.1
  - R2.2
  - R2.3
  - R3.1
  - R3.2
  - R3.3
  - R4.1
  - R4.2
  - R4.3
  - R5.1
  - R5.2
  - R5.3
  - R6.1
  - R6.2
  - R6.3
  - R8.1
  - R8.2
gap_closure: true

must_haves:
  truths:
    - "REQUIREMENTS.md traceability table reflects actual completion state for all 19 v1.0 requirements"
    - "requirements-completed frontmatter added to SUMMARY.md files for phases 01-06"
    - "Coverage count at top of REQUIREMENTS.md is updated"
    - "All [x] checkboxes correspond to requirements with confirmed VERIFICATION.md evidence"
  artifacts:
    - path: ".planning/REQUIREMENTS.md"
      provides: "Updated traceability table with accurate Status column"
      contains: "Complete"
  key_links:
    - from: ".planning/REQUIREMENTS.md traceability table"
      to: ".planning/phases/*/VERIFICATION.md"
      via: "status column reflects VERIFICATION.md passed/human_needed status"
      pattern: "Complete|Pending"
---

<objective>
Update REQUIREMENTS.md traceability table and add requirements-completed frontmatter
to phases 01-06 SUMMARY.md files. Pure documentation — no code changes.

This phase closes the global tech debt item identified in the milestone audit:
"REQUIREMENTS.md traceability table shows 'Pending' for 17/19 requirements — checkboxes
never updated as work completed."

After execution:
- REQUIREMENTS.md traceability table accurately reflects all 19 requirements
- phases 01-06 SUMMARY.md files have requirements-completed frontmatter
- The 3-source cross-reference protocol has consistent data across all sources

This phase MUST execute after phases 8.1, 8.2, and 8.3 are complete so the
documentation reflects the actual post-gap-closure state.
</objective>

<execution_context>
@/home/tasostilsi/.claude/get-shit-done/workflows/execute-plan.md
@/home/tasostilsi/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/REQUIREMENTS.md
@.planning/v1.0-MILESTONE-AUDIT.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Update REQUIREMENTS.md traceability table</name>
  <files>.planning/REQUIREMENTS.md</files>
  <action>
Update the traceability table at the bottom of REQUIREMENTS.md. The table currently
has 17/19 requirements marked "Pending" — this is stale from initial creation.

**Status mapping to apply** (based on audit findings and gap closure phases):

| Requirement | Phase | New Status |
|-------------|-------|------------|
| R1.1: Kuzu Database Integration | Phase 1: Storage Foundation | Complete |
| R1.2: Dual-Scope Storage | Phase 1: Storage Foundation | Complete |
| R3.1: File-Level Exclusions | Phase 2: Security Filtering | Complete (human_needed → update after 8.5 passes) |
| R3.2: Entity-Level Sanitization | Phase 2: Security Filtering | Complete (human_needed) |
| R3.3: Pre-Commit Validation | Phase 2: Security Filtering | Complete (human_needed) |
| R5.1: Cloud Ollama Primary | Phase 8.1: Gap Closure — Verification Files | Pending (Phase 8.1 must execute) |
| R5.2: Local Ollama Fallback | Phase 8.1: Gap Closure — Verification Files | Pending (Phase 8.1 must execute) |
| R5.3: Fallback Hierarchy | Phase 8.1: Gap Closure — Verification Files | Pending (Phase 8.1 must execute) |
| R2.1: Core Operations | Phase 4: CLI Interface | Complete |
| R2.2: Configuration Management | Phase 4: CLI Interface | Complete |
| R2.3: Health & Diagnostics | Phase 4: CLI Interface | Complete |
| R4.3: Background Processing | Phase 8.3: Gap Closure — Queue Dispatch | Pending (Phase 8.3 must execute) |
| R4.1: Conversation-Based Capture | Phase 8.5: Gap Closure — Human Runtime Verification | Pending (Phase 8.5 must execute) |
| R4.2: Git Post-Commit Hook | Phase 8.3: Gap Closure — Queue Dispatch | Pending (Phase 8.3 must execute) |
| R8.1: Git-Safe Knowledge Graphs | Phase 7.1: Git Indexing Pivot | Complete |
| R8.2: Merge Conflict Prevention | Phase 7.1: Git Indexing Pivot | Complete |
| R6.1: MCP Server Tools | Phase 8.1: Gap Closure — Verification Files | Pending (Phase 8.1 must execute) |
| R6.2: Context Injection Hooks | Phase 8.2: Gap Closure — MCP Server Bugs | Pending (Phase 8.2 must execute) |
| R6.3: Conversation Capture Hook | Phase 8.2: Gap Closure — MCP Server Bugs | Pending (Phase 8.2 must execute) |

**Statuses for requirements whose phases are already VERIFIED (VERIFICATION.md status: passed):**
- R1.1, R1.2 → Complete (Phase 01 VERIFICATION.md: passed)
- R3.1, R3.2, R3.3 → Complete (Phase 02 VERIFICATION.md: human_needed — mark Complete, note pending human runtime test)
- R2.1, R2.2, R2.3 → Complete (Phase 04 VERIFICATION.md: passed)
- R8.1, R8.2 → Complete (Phase 7.1 VERIFICATION.md: passed)

**Statuses for requirements tracked in gap closure phases (not yet executed):**
- R5.1, R5.2, R5.3 → Pending (Phase 8.1)
- R6.1 → Pending (Phase 8.1)
- R6.2 → Pending (Phase 8.2)
- R6.3 → Pending (Phase 8.2)
- R4.3 → Pending (Phase 8.3)
- R4.2 → Pending (Phase 8.3 + 8.5)
- R4.1 → Pending (Phase 8.5)

**Update coverage count** in the first paragraph of REQUIREMENTS.md if it has one.
Also update `Last Updated` date to 2026-02-24.

Read the current REQUIREMENTS.md traceability table first, then apply these updates.
Note: The Phase column was already updated in a previous step for R4.1-4.3, R5.1-5.3,
R6.1-6.3, R8.1-8.2 — only update the Status column where Pending should become Complete
based on the mapping above.
  </action>
  <verify>
Count completed requirements:
```bash
grep -c "Complete" .planning/REQUIREMENTS.md
```
Expected: at least 9 (R1.1, R1.2, R2.1, R2.2, R2.3, R3.1, R3.2, R3.3, R8.1, R8.2 = 10).

Check last updated date was updated:
```bash
grep "Last Updated" .planning/REQUIREMENTS.md
```
Expected: contains 2026-02-24.
  </verify>
  <done>
REQUIREMENTS.md traceability table updated with accurate Status values:
- 10 requirements marked Complete (verified phases)
- 9 requirements marked Pending (gap closure phases not yet executed)
- Last Updated date updated to 2026-02-24
  </done>
</task>

<task type="auto">
  <name>Task 2: Add requirements-completed frontmatter to phases 01-06 SUMMARY.md files</name>
  <files>
    .planning/phases/01-storage-foundation/*.md,
    .planning/phases/02-security-filtering/*.md,
    .planning/phases/03-llm-integration/*.md,
    .planning/phases/04-cli-interface/04-01-SUMMARY.md,
    .planning/phases/05-background-queue/*.md,
    .planning/phases/06-automatic-capture/*.md
  </files>
  <action>
Add `requirements-completed:` YAML frontmatter to SUMMARY.md files in phases 01-06.
Each SUMMARY.md must declare which requirements the plan completed.

**Requirements-completed mapping:**

Phase 01 — Storage Foundation:
- 01-01-SUMMARY.md: requirements-completed: [R1.1, R1.2]
- 01-02-SUMMARY.md: requirements-completed: [R1.1, R1.2]
- 01-03-SUMMARY.md: requirements-completed: [R1.1, R1.2]

Phase 02 — Security Filtering:
- 02-01-SUMMARY.md: requirements-completed: [R3.1]
- 02-02-SUMMARY.md: requirements-completed: [R3.1, R3.3]
- 02-03-SUMMARY.md: requirements-completed: [R3.2]
- 02-04-SUMMARY.md: requirements-completed: [R3.2]
- 02-05-SUMMARY.md: requirements-completed: [R3.1, R3.2, R3.3]

Phase 03 — LLM Integration:
- 03-01-SUMMARY.md: requirements-completed: [R5.1, R5.2, R5.3]
- 03-02-SUMMARY.md: requirements-completed: [R5.1, R5.2, R5.3]
- 03-03-SUMMARY.md: requirements-completed: [R5.3]
- 03-04-SUMMARY.md: requirements-completed: [R5.1, R5.2, R5.3]
- 03-05-SUMMARY.md: requirements-completed: [R5.1, R5.2, R5.3]

Phase 04 — CLI Interface:
- 04-01-SUMMARY.md: requirements-completed: [R2.1, R2.2, R2.3]
(Only add to 04-01 if it doesn't already have it; check other SUMMARY.md files
and add requirements-completed to those that cover 04's requirements R2.1-R2.3.)

Phase 05 — Background Queue:
- 05-01-SUMMARY.md: requirements-completed: [R4.3]
- 05-02-SUMMARY.md: requirements-completed: [R4.3]
- 05-03-SUMMARY.md: requirements-completed: [R4.3]

Phase 06 — Automatic Capture:
- 06-01-SUMMARY.md: requirements-completed: [R4.1, R4.2]
- 06-02-SUMMARY.md: requirements-completed: [R4.1, R4.2]
- 06-03-SUMMARY.md: requirements-completed: [R4.1, R4.2]
- 06-04-SUMMARY.md: requirements-completed: [R4.1, R4.2]

**How to add the frontmatter:**
For each SUMMARY.md file, read the current content. If it has YAML frontmatter
(starts with `---`), add `requirements-completed:` inside the existing frontmatter
block after any existing fields. If it has no frontmatter, prepend:
```yaml
---
requirements-completed: [R_X.Y]
---
```

Read each file before modifying to determine if frontmatter already exists.
Do NOT overwrite any existing frontmatter fields.
  </action>
  <verify>
Count SUMMARY.md files with requirements-completed in phases 01-06:
```bash
grep -rl "requirements-completed" .planning/phases/0[1-6]-*/
```
Expected: at least 15 files across phases 01-06.

Spot-check phase 03 (most important — this is the phase that lacked it):
```bash
grep "requirements-completed" .planning/phases/03-llm-integration/03-05-SUMMARY.md
```
Expected: line containing `requirements-completed: [R5.1, R5.2, R5.3]`
  </verify>
  <done>
SUMMARY.md files for phases 01-06 all contain requirements-completed frontmatter
listing the requirement IDs completed by each plan.
  </done>
</task>

</tasks>

<verification>
After both tasks complete:

1. REQUIREMENTS.md has 10 Complete entries and 9 Pending entries:
   - Complete: R1.1, R1.2, R2.1, R2.2, R2.3, R3.1, R3.2, R3.3, R8.1, R8.2
   - Pending: R4.1, R4.2, R4.3, R5.1, R5.2, R5.3, R6.1, R6.2, R6.3

2. requirements-completed frontmatter present in phases 01-06 SUMMARY.md files.

3. REQUIREMENTS.md Last Updated: 2026-02-24.
</verification>

<success_criteria>
- REQUIREMENTS.md traceability table: 10 Complete, 9 Pending (gap closure phases)
- All phases 01-06 SUMMARY.md files have requirements-completed frontmatter
- Last Updated date is 2026-02-24
- Coverage count reflects accurate state
</success_criteria>

<output>
After completion, create `.planning/phases/8.4-gap-closure-documentation-traceability-inserted/8.4-01-SUMMARY.md`
following the GSD summary template.
</output>
